OBJS = \
        base_context.obj \
        base_error.obj \
        base_geometry.obj \
        base_getopt.obj \
        base_hash.obj \
        base_memory.obj \
        base_string.obj \
        base_time.obj \
        base_trans.obj \
        base_xml.obj \
        crypt_aes.obj \
        crypt_arc4.obj \
        crypt_md5.obj \
        crypt_sha2.obj \
        dev_bbox.obj \
        dev_list.obj \
        dev_null.obj \
        dev_text.obj \
        dev_trace.obj \
        doc_document.obj \
        doc_interactive.obj \
        doc_link.obj \
        doc_outline.obj \
        doc_search.obj \
        filt_basic.obj \
        filt_dctd.obj \
        filt_faxd.obj \
        filt_flate.obj \
        filt_jbig2d.obj \
        filt_lzwd.obj \
        filt_predict.obj \
        image_jpeg.obj \
        image_jpx.obj \
        image_md5.obj \
        image_png.obj \
        image_save.obj \
        image_tiff.obj \
        memento.obj \
        res_bitmap.obj \
        res_colorspace.obj \
        res_font.obj \
        res_halftone.obj \
        res_path.obj \
        res_pixmap.obj \
        res_shade.obj \
        res_store.obj \
        res_text.obj \
        stm_buffer.obj \
        stm_comp_buf.obj \
        stm_open.obj \
        stm_output.obj \
        stm_read.obj \
        pdf_annot.obj \
        pdf_cmap.obj \
        pdf_cmap_load.obj \
        pdf_cmap_parse.obj \
        pdf_cmap_table.obj \
        pdf_colorspace.obj \
        pdf_crypt.obj \
        pdf_device.obj \
        pdf_encoding.obj \
        pdf_event.obj \
        pdf_font.obj \
        pdf_fontfile.obj \
        pdf_form.obj \
        pdf_function.obj \
        pdf_image.obj \
        pdf_interpret.obj \
        pdf_js_none.obj \
        pdf_jsimp_cpp.obj \
        pdf_lex.obj \
        pdf_metrics.obj \
        pdf_nametree.obj \
        pdf_object.obj \
        pdf_outline.obj \
        pdf_page.obj \
        pdf_parse.obj \
        pdf_pattern.obj \
        pdf_repair.obj \
        pdf_shade.obj \
        pdf_store.obj \
        pdf_stream.obj \
        pdf_type3.obj \
        pdf_unicode.obj \
        pdf_write.obj \
        pdf_xobject.obj \
        pdf_xref.obj \
        pdf_xref_aux.obj \
        xps_common.obj \
        xps_doc.obj \
        xps_glyphs.obj \
        xps_gradient.obj \
        xps_image.obj \
        xps_outline.obj \
        xps_path.obj \
        xps_resource.obj \
        xps_tile.obj \
        xps_util.obj \
        xps_zip.obj \
        mucbz.obj \
        draw_affine.obj \
        draw_blend.obj \
        draw_device.obj \
        draw_edge.obj \
        draw_glyph.obj \
        draw_mesh.obj \
        draw_paint.obj \
        draw_path.obj \
        draw_scale.obj \
        draw_unpack.obj

CC = CL
INCLUDES = /I..\jbig2dec /I..\jpeg /I..\png /I..\openjpeg /I..\zlib /I..\freetype
CFLAGS = /c /Zi /nologo /MD /D_POSIX $(INCLUDES)
AR = LIB /nologo
SRCDIR = .\ 

.SUFFIXES: .obj .c

{$(SRCDIR)}.c.obj:
	$(CC) $(CFLAGS) $<

libmupdf.lib: $(OBJS)
	$(AR) /out:$@ $**

clean:
	DEL libmupdf.lib
	DEL *.pdb
	DEL *.obj
	DEL *.bak
